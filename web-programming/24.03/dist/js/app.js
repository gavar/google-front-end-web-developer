!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){}var s=["anchor","bicycle","bolt","bomb","cube","diamond","leaf","paper-plane-o"];var c=function(){function e(t){var r=this;i(this,e),this.repaint=function(){r.dirty=!1,r.render(r.props,r.state)},this.componentWillMount=this.componentWillMount||o,this.componentDidMount=this.componentDidMount||o,this.events=document.createDocumentFragment(),this.props=Object.assign({},t),this.state=this.initialState(),this.componentWillMount(this.props,this.state),this.render(this.props,this.state),this.componentDidMount(this.props,this.state)}return r(e,[{key:"setState",value:function(e){var t=this.state,r=this.props;"function"==typeof e&&(e=e(t,r)||t),Object.assign(this.state,e),this.dirty||(this.dirty=!0,setTimeout(this.repaint,0))}},{key:"addEventListener",value:function(e,t,r){this.events.addEventListener(e,t,r)}},{key:"dispatchEvent",value:function(e){return this.events.dispatchEvent(e)}},{key:"removeEventListener",value:function(e,t,r){this.events.removeEventListener(e,t,r)}},{key:"initialState",value:function(){return{}}}]),e}(),l={moves:0,stars:3,startTime:0,completeTime:0},u=Object.assign({},l),v=new Event("game-over"),f=["open","show","match","wrong"],d=function(e){function t(e){i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.delay=1e3,e.deck.addEventListener("click",r.onDeckClick.bind(r)),e.restart.addEventListener("click",r.onRestartClick.bind(r)),r}return a(t,c),r(t,[{key:"render",value:function(e,t){e.deck.style.display=t.visible?null:"none",e.moves.innerText=u.moves.toString();var r=!0,n=!1,a=void 0;try{for(var i,o=t.cards[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;switch(s.status){case"correct":s.element.classList.add("show","match");break;case"selection":s.element.classList.add("show","open");break;case"incorrect":s.element.classList.add("show","open","wrong");break;default:s.element.classList.remove.apply(s.element.classList,f)}}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}for(;t.stars.length>u.stars;)t.stars.pop().remove()}},{key:"restart",value:function(){var e=this;for(var t in u)delete u[t];Object.assign(u,l),this.setState(function(t,r){var n=e.initialState(),a=!0,i=!1,o=void 0;try{for(var c,l=t.cards[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){c.value.element.remove()}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}var v=!0,f=!1,d=void 0;try{for(var h,y=s[Symbol.iterator]();!(v=(h=y.next()).done);v=!0){var m=h.value;(O=document.createElement("li")).classList.add("card"),(g=document.createElement("i")).classList.add("fa","fa-"+m),O.appendChild(g),n.cards.push({shows:0,element:O},{shows:0,element:O.cloneNode(!0)})}}catch(e){f=!0,d=e}finally{try{!v&&y.return&&y.return()}finally{if(f)throw d}}var p=!0,b=!1,k=void 0;try{for(var S,w=t.stars[Symbol.iterator]();!(p=(S=w.next()).done);p=!0){S.value.remove()}}catch(e){b=!0,k=e}finally{try{!p&&w.return&&w.return()}finally{if(b)throw k}}for(var g=0;g<u.stars;g++){var O=document.createElement("li"),x=document.createElement("i");x.classList.add("fa","fa-star"),O.appendChild(x),n.stars.push(O)}!function(e){for(var t=void 0,r=void 0,n=e.length-1;n>=0;n--)r=Math.floor(Math.random()*n),t=e[n],e[n]=e[r],e[r]=t}(n.cards);var E=document.createDocumentFragment(),L=!0,M=!1,T=void 0;try{for(var _,C=n.cards[Symbol.iterator]();!(L=(_=C.next()).done);L=!0){var j=_.value;E.appendChild(j.element)}}catch(e){M=!0,T=e}finally{try{!L&&C.return&&C.return()}finally{if(M)throw T}}r.deck.appendChild(E);var D=document.createDocumentFragment(),q=!0,P=!1,F=void 0;try{for(var G,I=n.stars[Symbol.iterator]();!(q=(G=I.next()).done);q=!0){var W=G.value;D.appendChild(W)}}catch(e){P=!0,F=e}finally{try{!q&&I.return&&I.return()}finally{if(P)throw F}}return r.stars.appendChild(D),n})}},{key:"componentWillMount",value:function(){this.restart()}},{key:"componentDidMount",value:function(e){var t=this;this.update(e),setInterval(function(){return t.update(e)},250)}},{key:"initialState",value:function(){return{visible:!0,mistakes:0,stars:[],cards:[]}}},{key:"update",value:function(e){var t=Date.now(),r=new Date((u.completeTime||t)-(u.startTime||t)),n=r.getSeconds();r.getMilliseconds()>=500&&n++,n<10&&(n="0"+n);var a=r.getMinutes();a<10&&(a="0"+a);var i=a+":"+n;e.time.innerText!==i&&(e.time.innerText=i)}},{key:"isGameOver",value:function(e){return this.countOf(e.cards,"correct")===e.cards.length}},{key:"cardOf",value:function(e,t){var r=!0,n=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;if(s.element===t)return s}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}}},{key:"countOf",value:function(e,t){var r=0,n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.status===t&&r++}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}},{key:"onSelectListElement",value:function(e){var t=this;this.setState(function(r){u.startTime<=0&&(u.startTime=Date.now());var n=t.cardOf(r.cards,e);switch(n.status){case"selection":case"correct":return}if(!(t.countOf(r.cards,"selection")>1)){n.status="selection",n.shows++;for(var a=[],i=0;i<r.cards.length;i++)"selection"===r.cards[i].status&&a.push(i);if(a.length>1)u.moves++,t.hasMatch(r,a)?t.onSuccessfulMatch(a):t.onMatchFailure(a);return r}})}},{key:"hasMatch",value:function(e,t){if(t.length<1)return!1;for(var r=e.cards[t[0]].element.firstElementChild,n=1;n<t.length;n++){var a=e.cards[t[n]].element.firstElementChild;if(r.className!==a.className)return!1}return!0}},{key:"onSuccessfulMatch",value:function(e){var t=this;this.setState(function(r){var n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;r.cards[c].status="correct"}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}t.isGameOver(r)&&(u.completeTime=Date.now(),t.dispatchEvent(v))})}},{key:"onMatchFailure",value:function(e){var t=this;this.setState(function(r){var n=!1,a=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,v=r.cards[l];v.shows>1&&(n=!0),v.status="incorrect"}}catch(e){i=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw o}}n&&r.mistakes++,u.stars=t.calculateStars(r.mistakes)}),setTimeout(function(){t.deleteStatusByIndexes(e)},this.delay)}},{key:"deleteStatusByIndexes",value:function(e){this.setState(function(t){var r=!0,n=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;delete t.cards[s].status}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}})}},{key:"calculateStars",value:function(e){return console.log("moves:",u.moves,"mistakes:",e),e<3?3:e<6?2:1}},{key:"onDeckClick",value:function(e){e.target instanceof HTMLLIElement&&this.onSelectListElement(e.target)}},{key:"onRestartClick",value:function(){this.restart()}}]),t}(),h=function(e){function t(e){i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.game.addEventListener("game-over",r.onGameOver.bind(r)),e.restart.addEventListener("click",r.onPlayAgainClick.bind(r)),r}return a(t,c),r(t,[{key:"render",value:function(e,t){var r=new Date(u.completeTime-u.startTime);switch(e.seconds.innerText=r.getSeconds()+" seconds",e.minutes.innerText=r.getMinutes()+" minutes",e.moves.innerText=u.moves.toString(),e.stars.innerText=u.stars.toString(),t.visible){case!0:e.view.classList.add("show");break;case!1:e.view.classList.remove("show")}}},{key:"initialState",value:function(){return{visible:void 0}}},{key:"onGameOver",value:function(){this.setState({visible:!0})}},{key:"onPlayAgainClick",value:function(){this.setState(function(e,t){return e.visible=!1,t.game.restart(),e})}}]),t}(),y=document.querySelector(".game"),m=new d({deck:y.querySelector(".deck"),time:y.querySelector(".time"),moves:y.querySelector(".moves"),stars:y.querySelector(".stars"),restart:y.querySelector(".restart")}),p=document.querySelector(".game-over");new h({game:m,view:p,seconds:p.querySelector(".seconds"),minutes:p.querySelector(".minutes"),moves:p.querySelector(".moves"),stars:p.querySelector(".stars"),restart:p.querySelector(".restart")})}]);
//# sourceMappingURL=app.js.map